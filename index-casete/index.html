<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">

<!-- #BeginTemplate "../tabbed_desktop.dwt" -->

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<meta content="en-us" http-equiv="Content-Language" />
<meta content="width=device-width, initial-scale=1.0" name="viewport" />
<link id="dark" href="../css/style.css" rel="stylesheet" />
<!-- #BeginEditable "docprops" -->
	<title>index melodii casete</title>
<script src="/dark.js"></script>
<script language="javascript" type="text/javascript">
var darkmode = getTheme()
if (darkmode == "yes"){
	document.getElementById("dark").href="/css/dark.css";
}
if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ){
	document.getElementById("dark").href="/mobile/css/style.css";
	if (darkmode == "yes"){
		document.getElementById("dark").href="/mobile/css/dark.css";
		}
	}
function parseJSON(str) {
  return eval("(" + str + ")");
}

function createXHR() {
  if (window.XMLHttpRequest) {
    return new XMLHttpRequest();
  } else {
    try {
      return new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
      try {
        return new ActiveXObject("Microsoft.XMLHTTP");
      } catch (e2) {
        return null;
      }
    }
  }
}

var protocol = "http://";

function loadtap(){//fn to autoexpand tape with id
    if (window.location.href.indexOf("?") > -1){
        var urlString = window.location.href
        var paramString = urlString.split('?')[1];
        var params_arr = paramString.split('&');
        for (var i = 0; i < params_arr.length; i++) {
            var pair = params_arr[i].split('=');
            if (pair[0] == "tape"){
                var tap = document.getElementById("tape"+pair[1]);
                if (null != tap)tap.className = tap.className == "collapsed" ? "expanded" : "collapsed";
            }
        }
    }
}
function outliner () {
	oMe = window.event.srcElement
	//get child element
	var child = document.all[event.srcElement.getAttribute("child",false)];
	//if child element exists, expand or collapse it.
	if (null != child)
		child.className = child.className == "collapsed" ? "expanded" : "collapsed";
}
function changepic() {
	uMe = window.event.srcElement;
	var check = uMe.src.toLowerCase();
	if (check.lastIndexOf("download/plus.gif") != -1)
	{
		uMe.src = "../download/Minus.gif"
	}
	else
	{
		uMe.src = "../download/Plus.gif"
	}
}
function setsrc(id, url){
	var elem = document.getElementById(id);
    if (null != elem)elem.src = url;
}

function makeTHeader(){
  var html = '<table cellpadding="2" cellspacing="0" width="98%" border="1" style="background-color:#1ba2e0; border-color:white" class="infotable"><tr>';
  html += '<tr><td class="header" style="width: 21px"></td>';
  html += '<td class="header" style="width: 21px"><a href="https://1drv.ms/x/c/275bef9318a2fe03/EYHygPOzWSpLiGAAR8TeiosBK_KsEg8Tr2FexRvtwR1zwA">ID</a></td>';
  html += '<td class="header" style="width: 100%">Filename</td>';
  html += '<td class="header" style="width: 100px">Tape Type</td></tr>';
  return html;
}

var offset = 0, count = 0, written = false;

function makeTFooter(){
  var html = '<table style="background-color:#1ba2e0; width:98%; border:1px solid white; padding:2" class="infotable">';
  html += '<tr style="vertical-align:top">';
  html += '<td class="foot" style="width: 100">' + count + ' Cassettes</td>';
  html += '</tr></table>';
  document.getElementById('tapeList').innerHTML += html;
  loadtap();
}

function tableFormatter(info){
var data = parseJSON(info);
  var html = '';
  for (var i = 0; i < data.tapes.length; i++) {
      var tape = data.tapes[i];
      var idnum = 0 + offset + i;
      var idnum = 'tape' + idnum;
      html += '<tr class="row">';

      if (tape.id != null){
        idnum = 'tape' + tape.id;
      }
      html += '<td class="content" style="width:21px"><img alt="expand/collapse section" class="expandable" height="11" onclick="changepic()" src="../download/Plus.gif" width="9" child="' + idnum +'"/></td>';

      if (tape.id != null){
        html += '<td class="content" style="width:21px">' + tape.id + '</td>';
      }
      else html += '<td class="content" style="width:21px">n/a</td>';

      html += '<td class="content" child="' + idnum + '" style="width: 100%">' + tape.name + '</td>';
      count++;
	  html += '<td class="content">unknown</td></tr>'
	  html += '<tr class="collapsed" id="' + idnum + '"><td colspan="4">';
	  html += '<table width="97%" border="1" style="border-color:#dcdcdc" rules="cols" class="issuetable">';
      if (tape.side_1 != null){
        html += '<tr><td colspan="3" class="issuetitle">Side ' + tape.side_1[0].name + '</td></tr>';
        html += '<tr><td style="width:10px" class="issuehdr">#</td><td class="issuehdr">Artist</td><td class="issuehdr">Name</td></tr>'
        for(var j=1; j< tape.side_1.length; j++){
          var line = tape.side_1[j];
          html += '<tr><td style="width:10px" class="issuecontent">' + line.nr + '</td>';
          html += '<td class="issuecontent">' + line.author + '</td>';
          html += '<td class="issuecontent">' + line.title + '</td></tr>';
        }
        if (tape.side_2 != null){
          html += '<tr><td colspan="3" class="issuetitle">Side ' + tape.side_2[0].name + '</td></tr>';
          html += '<tr><td style="width:10px" class="issuehdr">#</td><td class="issuehdr">Artist</td><td class="issuehdr">Name</td></tr>'
          for(var j=1; j< tape.side_2.length; j++){
            var line = tape.side_2[j];
            html += '<tr><td style="width:10px" class="issuecontent">' + line.nr + '</td>';
            html += '<td class="issuecontent">' + line.author + '</td>';
            html += '<td class="issuecontent">' + line.title + '</td></tr>';
          }
        }
        html += "</table></td>"
      }
      offset += data.tapes.length;
    }
  return html;
}
        
function loadFirstTapes(nr) {
  protocol = window.location.protocol;
  document.getElementById('tapeList').innerHTML = "";
  var xhr = createXHR();
  if (!xhr) return;
  xhr.onreadystatechange = function() {
    if (xhr.readyState == 4 && xhr.status == 200) {
                    document.getElementById('tapeList').innerHTML += makeTHeader() + tableFormatter(xhr.responseText);
                    loadMoreTapes("tapes_", 2, nr);
                }
            };
            xhr.open("GET", protocol + "//digitix08.42web.io/api/index-casete/index.php?list=tapes_1", true);
            xhr.send();
}

function loadMoreTapes(file, nr, cnt){
  var xhr = createXHR();
  if (!xhr) return;
  xhr.onreadystatechange = function() {
    if (xhr.readyState == 4){
      if (xhr.status == 200) {
                var html = '<table cellpadding="2" cellspacing="0" width="98%" border="1" style="background-color:#1ba2e0; border-color:white" class="infotable"><tr>'
                html += tableFormatter(xhr.responseText) + "</tr></table>";
                    document.getElementById('tapeList').innerHTML += html;
                }
      if (xhr.status == 200 || xhr.status == 400){
      if(nr<cnt){
        nr++;
        loadMoreTapes("tapes_", nr, cnt);
        }
      else if(nr == cnt)makeTFooter();
      }
    }
}
    xhr.open("GET", protocol + "//digitix08.42web.io/api/index-casete/index.php?list=" + file + nr, true);
    xhr.send();
}

window.onload = function(){ loadFirstTapes(3); }
document.onclick = function(){ outliner(); }
</script>
<style type="text/css">


.collapsed{
	DISPLAY: none
}
.chrome{
	width: 100px;
	background-color: #000044;
	color: #FFFFFF;
}
.ferric{
	width: 100px;
	background-color: #331c05;
	color: #ffffff;
}
</style>
<!-- #EndEditable -->
<style type="text/css">

.container{
	margin-left: auto;
	margin-right: auto;
}
</style>
</head>

<!-- #BeginEditable "onload" -->
<body>

<!-- #EndEditable -->
<table id="body" class="container">
	<tr>
		<td style="height: 46px" colspan="2">
		<h1 class="menu" id="title">Digitix08's Testsite</h1>
		</td>
	</tr>
	<!-- #BeginEditable "menu" -->
	<tr class="ctrltable menu"><td class="menu" style="width:100px">
			<a class="menu" id="home" href="../index.htm">Home</a>
			</td><td class="menu" style="width:100%">
			<a class="menu" href="../index-old.htm">Search</a>
			<a class="menu" href="../account/login.html">Login</a>
			<a class="menu" href="../games/index.html">Games</a>
			<a class="menu" href="../MINECRAFT.htm">Minecraft srvrs</a>
			<a class="menucurrent">Index casete</a>
		</td></tr>
	<!-- #EndEditable -->
	<!-- #BeginEditable "body" -->
		<tr>
				<td colspan="2">
				<h1 id="darkH1">Index-ul melodiilor de pe casete</h1>
		<p><span class="note">
		<b>Last modified:  </b>
		<!--webbot bot="TimeStamp" s-format="%d.%m.%Y %H:%M" s-type="EDITED" startspan -->25.01.2026 11:09<!--webbot bot="TimeStamp" endspan i-checksum="26010" --></span></p>
		<h2>List of Files</h2>
		<div id="tapeList">Loading...</div>
		</td>
      </tr>

	<!-- #EndEditable -->
</table>

</body>

<!-- #EndTemplate -->

</html>
